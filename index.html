<!DOCTYPE html>
<html lang="en">
<head><meta name="description" content="Biblical-historical, hope-filled web experience by Depths to the Heights.">
<meta property="og:title" content="The Babylon Protocol — Corporate Colossus">
<meta property="og:description" content="A reflective, educational, Bible-grounded web app.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://depthstoheights.github.io/The-Babylon-Protocol-Corporate-Colossus/">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="icon-192.png" sizes="192x192">
<meta name="theme-color" content="#0b1324">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Babylon Protocol: Corporate Colossus</title>
    <!-- Project Name: The Babylon Protocol: Corporate Colossus -->
    <meta name="description" content="Navigate corporate power and pride through ancient wisdom">
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="data:application/manifest+json,{
        'name': 'The Babylon Protocol: Corporate Colossus',
        'short_name': 'Babylon Protocol',
        'description': 'Navigate corporate power and pride through ancient wisdom',
        'start_url': '/',
        'display': 'standalone',
        'background_color': '#1a202c',
        'theme_color': '#d69e2e',
        'icons': [
            {
                'src': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiBmaWxsPSIjMWEyMDJjIi8+CjxyZWN0IHg9IjQ4IiB5PSI0OCIgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjZDY5ZTJlIi8+Cjwvc3ZnPgo=',
                'sizes': '192x192',
                'type': 'image/svg+xml'
            }
        ]
    }">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&display=swap');
        
        :root {
            --bg-primary: #1a202c;
            --bg-secondary: #2d3748;
            --bg-tertiary: #4a5568;
            --accent-gold: #d69e2e;
            --accent-gold-dark: #b7791f;
            --text-primary: #f7fafc;
            --text-secondary: #e2e8f0;
            --text-muted: #a0aec0;
            --danger: #e53e3e;
            --success: #38a169;
            --warning: #dd6b20;
            --border: #4a5568;
            --shadow: rgba(0, 0, 0, 0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        .app-container {
            min-height: 100vh;
            position: relative;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #2a3441 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.8s ease-out;
        }

        .splash-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .logo-container {
            position: relative;
            margin-bottom: 2rem;
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, var(--accent-gold), var(--accent-gold-dark));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
            color: var(--bg-primary);
            box-shadow: 0 20px 40px var(--shadow);
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .app-title {
            font-family: 'Crimson Text', serif;
            font-size: 2.5rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1rem;
            color: var(--accent-gold);
        }

        .app-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 3rem;
            max-width: 400px;
        }

        .splash-branding {
            position: absolute;
            bottom: 2rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Main Content */
        .main-content {
            opacity: 0;
            transition: opacity 0.8s ease-in;
        }

        .main-content.visible {
            opacity: 1;
        }

        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #2a3441 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%23d69e2e" fill-opacity="0.1" points="0,1000 1000,1000 1000,200 0,400"/><polygon fill="%23d69e2e" fill-opacity="0.05" points="0,800 1000,600 1000,0 0,0"/></svg>') no-repeat center center;
            background-size: cover;
            animation: heroParallax 20s ease-in-out infinite;
        }

        @keyframes heroParallax {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
        }

        .hook-text {
            font-family: 'Crimson Text', serif;
            font-size: 3rem;
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 2rem;
            color: var(--accent-gold);
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        .hook-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease-out 0.8s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button {
            background: linear-gradient(45deg, var(--accent-gold), var(--accent-gold-dark));
            color: var(--bg-primary);
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.24s ease-in-out;
            box-shadow: 0 10px 30px rgba(214, 158, 46, 0.3);
            animation: fadeInUp 1s ease-out 1.1s both;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(214, 158, 46, 0.4);
        }

        /* Game Interface */
        .game-interface {
            display: none;
            min-height: 100vh;
            padding: 2rem;
        }

        .game-interface.active {
            display: block;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem 2rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border);
        }

        .company-stats {
            display: flex;
            gap: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .pride-meter {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .pride-bar {
            width: 200px;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .pride-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
            width: 30%;
            transition: width 0.5s ease-out;
        }

        .scenario-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px var(--shadow);
        }

        .scenario-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .scenario-context {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .biblical-parallel {
            background: rgba(214, 158, 46, 0.1);
            border-left: 4px solid var(--accent-gold);
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        .biblical-text {
            font-style: italic;
            color: var(--accent-gold);
            margin-bottom: 0.5rem;
        }

        .biblical-reference {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .decision-options {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }

        .decision-button {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            color: var(--text-primary);
            padding: 1.5rem;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.24s ease-in-out;
            text-align: left;
        }

        .decision-button:hover {
            border-color: var(--accent-gold);
            background: rgba(214, 158, 46, 0.1);
        }

        .decision-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-gold);
        }

        .decision-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .impact-indicators {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
        }

        .impact-indicator {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-weight: 500;
        }

        .impact-profit { background: rgba(56, 161, 105, 0.2); color: var(--success); }
        .impact-people { background: rgba(49, 130, 206, 0.2); color: #4299e1; }
        .impact-pride { background: rgba(229, 62, 62, 0.2); color: var(--danger); }
        .impact-integrity { background: rgba(214, 158, 46, 0.2); color: var(--accent-gold); }

        /* Journal Section */
        .journal-section {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--border);
        }

        .journal-prompt {
            font-family: 'Crimson Text', serif;
            font-size: 1.3rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .journal-textarea {
            width: 100%;
            min-height: 150px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Progress Tracking */
        .progress-panel {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 2rem 0;
            border: 1px solid var(--border);
        }

        .progress-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .progress-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .metric-card {
            background: var(--bg-primary);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .metric-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Accessibility */
        .accessibility-panel {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            z-index: 100;
            transform: translateX(100%);
            transition: transform 0.24s ease-in-out;
        }

        .accessibility-panel.open {
            transform: translateX(0);
        }

        .accessibility-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--accent-gold);
            color: var(--bg-primary);
            border: none;
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
            z-index: 101;
            font-size: 1.2rem;
        }

        .help-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 1rem 2rem;
            transform: translateY(100%);
            transition: transform 0.24s ease-in-out;
            z-index: 200;
        }

        .help-panel.open {
            transform: translateY(0);
        }

        .help-toggle {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            z-index: 201;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hook-text {
                font-size: 2rem;
            }
            
            .game-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .company-stats {
                justify-content: center;
            }
            
            .decision-options {
                grid-template-columns: 1fr;
            }
        }

        /* High Contrast Mode */
        .high-contrast {
            --bg-primary: #000000;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #333333;
            --text-primary: #ffffff;
            --text-secondary: #ffffff;
            --accent-gold: #ffff00;
            --border: #ffffff;
        }

        /* Dyslexia Friendly Font */
        .dyslexia-friendly {
            font-family: 'Comic Sans MS', cursive;
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Splash Screen -->
        <div class="splash-screen" id="splashScreen">
            <div class="logo-container">
                <div class="logo">B</div>
            </div>
            <h1 class="app-title">The Babylon Protocol</h1>
            <h2 class="app-subtitle">Corporate Colossus</h2>
            <p class="app-subtitle">Navigate corporate power and pride through ancient wisdom</p>
            <div class="splash-branding">
                <p>Made by Justin — Depths to the Heights</p>
                <p>Free to use. <a href="https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U" style="color: var(--accent-gold);">Buy Justin a coffee</a> to support more projects</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Hero Section -->
            <section class="hero-section" id="heroSection">
                <div class="hero-background"></div>
                <div class="hero-content">
                    <h1 class="hook-text">Stand where Nebuchadnezzar stood. What will you choose when pride calls your name?</h1>
                    <p class="hook-subtitle">Build an empire that honors both profit and people. Learn humility through Daniel's example while navigating today's business world.</p>
                    <button class="cta-button" onclick="startGame()">Begin Your Corporate Journey</button>
                </div>
            </section>

            <!-- Game Interface -->
            <section class="game-interface" id="gameInterface">
                <div class="game-header">
                    <div class="company-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="profit">$2.5B</div>
                            <div class="stat-label">Annual Revenue</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="employees">15,000</div>
                            <div class="stat-label">Employees</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="reputation">72%</div>
                            <div class="stat-label">Public Trust</div>
                        </div>
                    </div>
                    <div class="pride-meter">
                        <span>Pride Level</span>
                        <div class="pride-bar">
                            <div class="pride-fill" id="prideFill"></div>
                        </div>
                    </div>
                </div>

                <div class="scenario-card" id="scenarioCard">
                    <h2 class="scenario-title">The Whistleblower's Dilemma</h2>
                    <p class="scenario-context">
                        A senior engineer has discovered that your company's flagship product has a design flaw that could cause environmental damage. The fix would cost $200 million and delay the product launch by six months, potentially costing thousands of jobs and disappointing shareholders who expect record profits this quarter.
                    </p>
                    
                    <div class="biblical-parallel">
                        <p class="biblical-text">"Pride goes before destruction, a haughty spirit before a fall."</p>
                        <p class="biblical-reference">— Proverbs 16:18</p>
                    </div>
                    
                    <p class="scenario-context">
                        King Nebuchadnezzar's pride led him to ignore warnings about his kingdom's foundation. Daniel consistently chose truth over comfort, even when it meant challenging the most powerful man in the world. What will your corporate throne be built upon?
                    </p>

                    <div class="decision-options">
                        <button class="decision-button" onclick="makeDecision('suppress')">
                            <div class="decision-title">Suppress the Report</div>
                            <div class="decision-description">Quietly handle the engineer and rush the product to market. Protect immediate profits and shareholder confidence.</div>
                            <div class="impact-indicators">
                                <span class="impact-indicator impact-profit">+Profit</span>
                                <span class="impact-indicator impact-pride">+Pride</span>
                                <span class="impact-indicator impact-people">-People</span>
                            </div>
                        </button>
                        
                        <button class="decision-button" onclick="makeDecision('delay')">
                            <div class="decision-title">Delay and Fix</div>
                            <div class="decision-description">Accept the cost and delay. Be transparent with stakeholders about prioritizing long-term responsibility over short-term gains.</div>
                            <div class="impact-indicators">
                                <span class="impact-indicator impact-integrity">+Integrity</span>
                                <span class="impact-indicator impact-people">+People</span>
                                <span class="impact-indicator impact-profit">-Profit</span>
                            </div>
                        </button>
                        
                        <button class="decision-button" onclick="makeDecision('compromise')">
                            <div class="decision-title">Find a Middle Path</div>
                            <div class="decision-description">Implement a partial fix that reduces risk while maintaining timeline. Communicate carefully with stakeholders.</div>
                            <div class="impact-indicators">
                                <span class="impact-indicator impact-profit">~Profit</span>
                                <span class="impact-indicator impact-people">~People</span>
                                <span class="impact-indicator impact-integrity">~Integrity</span>
                            </div>
                        </button>
                    </div>
                </div>

                <div class="journal-section">
                    <h3 class="journal-prompt">Reflection: How does this scenario challenge your understanding of leadership and responsibility?</h3>
                    <textarea class="journal-textarea" placeholder="Write your thoughts here... Consider: What would Daniel do in this situation? How do short-term pressures conflict with long-term values?"></textarea>
                </div>

                <div class="progress-panel">
                    <h3 class="progress-title">Your Corporate Legacy</h3>
                    <div class="progress-metrics">
                        <div class="metric-card">
                            <div class="metric-value">73%</div>
                            <div class="metric-label">Ethical Score</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">8.2M</div>
                            <div class="metric-label">Lives Impacted</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">12</div>
                            <div class="metric-label">Major Decisions</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">87%</div>
                            <div class="metric-label">Daniel Rating</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Accessibility Panel -->
        <button class="accessibility-toggle" onclick="toggleAccessibility()" aria-label="Accessibility Options">♿</button>
        <div class="accessibility-panel" id="accessibilityPanel">
            <h3>Accessibility Options</h3>
            <button onclick="toggleHighContrast()">High Contrast</button>
            <button onclick="toggleDyslexiaFont()">Dyslexia Friendly Font</button>
            <button onclick="adjustTextSize(1.2)">Larger Text</button>
            <button onclick="adjustTextSize(0.8)">Smaller Text</button>
        </div>

        <!-- Help Panel -->
        <button class="help-toggle" onclick="toggleHelp()">Need Support?</button>
        <div class="help-panel" id="helpPanel">
            <h3>Support & Resources</h3>
            <p><strong>Disclaimer:</strong> Spiritual encouragement and education—not medical advice.</p>
            <p><strong>U.S. Crisis Support:</strong> Call/Text 988 (Suicide & Crisis Lifeline)</p>
            <p><strong>Global:</strong> Use your local emergency number or speak with a trusted counselor/pastor.</p>
            <p><strong>Contact:</strong> depthstoheights@gmail.com</p>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            profit: 2.5,
            employees: 15000,
            reputation: 72,
            pride: 30,
            decisions: 0,
            ethicalScore: 73,
            livesImpacted: 8200000,
            danielRating: 87
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            // Show splash screen for 3 seconds
            setTimeout(() => {
                const splash = document.getElementById('splashScreen');
                const main = document.getElementById('mainContent');
                
                splash.classList.add('hidden');
                main.classList.add('visible');
            }, 3000);

            // Initialize PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:text/javascript,console.log("SW registered")');
            }
        });

        function startGame() {
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('gameInterface').classList.add('active');
            updateGameDisplay();
        }

        function makeDecision(choice) {
            gameState.decisions++;
            
            switch(choice) {
                case 'suppress':
                    gameState.profit += 0.3;
                    gameState.pride += 20;
                    gameState.reputation -= 15;
                    gameState.ethicalScore -= 10;
                    break;
                case 'delay':
                    gameState.profit -= 0.2;
                    gameState.pride -= 10;
                    gameState.reputation += 10;
                    gameState.ethicalScore += 15;
                    gameState.danielRating += 5;
                    break;
                case 'compromise':
                    gameState.profit -= 0.1;
                    gameState.pride += 5;
                    gameState.reputation += 5;
                    gameState.ethicalScore += 5;
                    break;
            }

            // Clamp values
            gameState.pride = Math.max(0, Math.min(100, gameState.pride));
            gameState.reputation = Math.max(0, Math.min(100, gameState.reputation));
            gameState.ethicalScore = Math.max(0, Math.min(100, gameState.ethicalScore));
            gameState.danielRating = Math.max(0, Math.min(100, gameState.danielRating));

            updateGameDisplay();
            loadNextScenario();
        }

        function updateGameDisplay() {
            document.getElementById('profit').textContent = `$${gameState.profit.toFixed(1)}B`;
            document.getElementById('employees').textContent = gameState.employees.toLocaleString();
            document.getElementById('reputation').textContent = `${gameState.reputation}%`;
            document.getElementById('prideFill').style.width = `${gameState.pride}%`;

            // Update progress metrics
            document.querySelector('.progress-metrics .metric-card:nth-child(1) .metric-value').textContent = `${gameState.ethicalScore}%`;
            document.querySelector('.progress-metrics .metric-card:nth-child(2) .metric-value').textContent = `${(gameState.livesImpacted / 1000000).toFixed(1)}M`;
            document.querySelector('.progress-metrics .metric-card:nth-child(3) .metric-value').textContent = gameState.decisions;
            document.querySelector('.progress-metrics .metric-card:nth-child(4) .metric-value').textContent = `${gameState.danielRating}%`;
        }

        function loadNextScenario() {
            const scenarios = [
                {
                    title: "The Labor Strike",
                    context: "Your factory workers are threatening to strike over unsafe working conditions and below-living wages. The union demands a 40% pay increase and safety upgrades costing $500M. Your board pressures you to outsource to cheaper overseas facilities instead.",
                    biblicalText: "Do not withhold good from those to whom it is due, when it is in your power to act.",
                    reference: "Proverbs 3:27",
                    parallel: "Nebuchadnezzar forced laborers to build his monuments to pride. Daniel consistently advocated for the oppressed, even risking his position to speak truth to power.",
                    decisions: [
                        {
                            id: 'negotiate',
                            title: 'Negotiate Fair Terms',
                            description: 'Work with union leaders to find sustainable wage increases and implement safety improvements over time.',
                            impacts: ['+People', '+Integrity', '-Profit'],
                            effects: { profit: -0.3, pride: -5, reputation: +15, ethical: +10 }
                        },
                        {
                            id: 'outsource',
                            title: 'Outsource Operations',
                            description: 'Move production overseas to lower-cost facilities. Maintain profit margins while eliminating the labor dispute.',
                            impacts: ['+Profit', '+Pride', '--People'],
                            effects: { profit: +0.4, pride: +15, reputation: -20, ethical: -15 }
                        },
                        {
                            id: 'automate',
                            title: 'Accelerate Automation',
                            description: 'Invest in robotic systems to reduce dependence on human labor while providing retraining programs.',
                            impacts: ['~Profit', '~People', '+Innovation'],
                            effects: { profit: -0.1, pride: +5, reputation: +5, ethical: +5 }
                        }
                    ]
                },
                {
                    title: "The Environmental Cover-Up",
                    context: "Internal studies reveal your operations have been contaminating local water supplies for years. Government inspectors are scheduled to visit next month. Your legal team suggests destroying the evidence and paying off local officials.",
                    biblicalText: "Whoever conceals their sins does not prosper, but the one who confesses and renounces them finds mercy.",
                    reference: "Proverbs 28:13",
                    parallel: "When Daniel interpreted Nebuchadnezzar's dream about the tree, he didn't hide the uncomfortable truth about pride's consequences. Truth-telling, even when costly, preserved Daniel's integrity.",
                    decisions: [
                        {
                            id: 'coverup',
                            title: 'Cover Up the Evidence',
                            description: 'Destroy internal studies and use your political connections to delay inspections. Protect the company from immediate liability.',
                            impacts: ['+Profit', '++Pride', '--People', '--Integrity'],
                            effects: { profit: +0.2, pride: +25, reputation: -5, ethical: -20 }
                        },
                        {
                            id: 'confess',
                            title: 'Full Disclosure',
                            description: 'Voluntarily report the contamination, implement immediate cleanup, and establish a victim compensation fund.',
                            impacts: ['--Profit', '-Pride', '+People', '++Integrity'],
                            effects: { profit: -0.8, pride: -15, reputation: +25, ethical: +25 }
                        },
                        {
                            id: 'gradual',
                            title: 'Gradual Remediation',
                            description: 'Begin cleanup quietly while preparing for eventual disclosure. Try to minimize damage while doing the right thing.',
                            impacts: ['-Profit', '~Pride', '+People', '+Integrity'],
                            effects: { profit: -0.4, pride: -5, reputation: +10, ethical: +15 }
                        }
                    ]
                },
                {
                    title: "The Acquisition Opportunity",
                    context: "A smaller competitor with breakthrough technology is struggling financially. You could acquire them for 30% of their true value, gaining market dominance. However, this would eliminate 5,000 jobs and potentially stifle innovation in your industry.",
                    biblicalText: "Do not exploit the poor because they are poor and do not crush the needy in court.",
                    reference: "Proverbs 22:22",
                    parallel: "Nebuchadnezzar's empire grew through conquest and exploitation. Daniel demonstrated that true strength comes from lifting others up, not crushing them underfoot.",
                    decisions: [
                        {
                            id: 'hostile',
                            title: 'Hostile Takeover',
                            description: 'Acquire the company at the lowest possible price. Eliminate redundancies and integrate their technology into your platform.',
                            impacts: ['++Profit', '+Pride', '--People'],
                            effects: { profit: +0.6, pride: +20, reputation: -15, ethical: -10 }
                        },
                        {
                            id: 'partnership',
                            title: 'Strategic Partnership',
                            description: 'Offer a fair partnership that preserves their independence while sharing resources and market access.',
                            impacts: ['+Profit', '-Pride', '+People', '+Integrity'],
                            effects: { profit: +0.2, pride: -10, reputation: +15, ethical: +15 }
                        },
                        {
                            id: 'invest',
                            title: 'Investment & Mentorship',
                            description: 'Provide capital investment and business mentorship to help them grow independently while benefiting from collaboration.',
                            impacts: ['~Profit', '--Pride', '++People', '+Integrity'],
                            effects: { profit: +0.1, pride: -20, reputation: +20, ethical: +20 }
                        }
                    ]
                }
            ];

            // Load next scenario
            const scenario = scenarios[gameState.decisions % scenarios.length];
            displayScenario(scenario);
        }

        function displayScenario(scenario) {
            const card = document.getElementById('scenarioCard');
            
            card.innerHTML = `
                <h2 class="scenario-title">${scenario.title}</h2>
                <p class="scenario-context">${scenario.context}</p>
                
                <div class="biblical-parallel">
                    <p class="biblical-text">"${scenario.biblicalText}"</p>
                    <p class="biblical-reference">— ${scenario.reference}</p>
                </div>
                
                <p class="scenario-context">${scenario.parallel}</p>

                <div class="decision-options">
                    ${scenario.decisions.map(decision => `
                        <button class="decision-button" onclick="makeScenarioDecision('${decision.id}', ${JSON.stringify(decision.effects).replace(/"/g, '&quot;')})">
                            <div class="decision-title">${decision.title}</div>
                            <div class="decision-description">${decision.description}</div>
                            <div class="impact-indicators">
                                ${decision.impacts.map(impact => {
                                    const type = impact.replace(/[+-]/g, '').toLowerCase();
                                    return `<span class="impact-indicator impact-${type}">${impact}</span>`;
                                }).join('')}
                            </div>
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function makeScenarioDecision(choice, effects) {
            gameState.decisions++;
            
            // Apply effects
            gameState.profit += effects.profit || 0;
            gameState.pride += effects.pride || 0;
            gameState.reputation += effects.reputation || 0;
            gameState.ethicalScore += effects.ethical || 0;

            // Update lives impacted based on decision scale
            const impactMultiplier = Math.abs(effects.profit || 0) + Math.abs(effects.reputation || 0);
            gameState.livesImpacted += Math.floor(impactMultiplier * 100000);

            // Calculate Daniel rating based on ethical choices
            const ethicalWeight = (effects.ethical || 0) / 5;
            const prideWeight = -(effects.pride || 0) / 10;
            gameState.danielRating += ethicalWeight + prideWeight;

            // Clamp values
            gameState.pride = Math.max(0, Math.min(100, gameState.pride));
            gameState.reputation = Math.max(0, Math.min(100, gameState.reputation));
            gameState.ethicalScore = Math.max(0, Math.min(100, gameState.ethicalScore));
            gameState.danielRating = Math.max(0, Math.min(100, gameState.danielRating));

            updateGameDisplay();

            // Show outcome
            showDecisionOutcome(choice);

            // Load next scenario after delay
            setTimeout(() => {
                if (gameState.decisions >= 10) {
                    showGameSummary();
                } else {
                    loadNextScenario();
                }
            }, 3000);
        }

        function showDecisionOutcome(choice) {
            // Create outcome overlay
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(26, 32, 44, 0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                animation: fadeIn 0.5s ease-out;
            `;

            const content = document.createElement('div');
            content.style.cssText = `
                background: var(--bg-secondary);
                padding: 2rem;
                border-radius: 20px;
                max-width: 500px;
                text-align: center;
                border: 1px solid var(--border);
            `;

            let message = '';
            let color = '';

            // Generate contextual feedback based on pride level and choice impact
            if (gameState.pride > 70) {
                message = 'Your growing pride clouds your judgment. Remember Nebuchadnezzar\'s fall...';
                color = 'var(--danger)';
            } else if (gameState.danielRating > 80) {
                message = 'Your integrity shines like Daniel\'s. Others are watching and learning.';
                color = 'var(--accent-gold)';
            } else if (gameState.reputation < 40) {
                message = 'Public trust is eroding. Even mighty Babylon fell when it lost the people\'s heart.';
                color = 'var(--warning)';
            } else {
                message = 'Every choice shapes your legacy. What kind of leader will you become?';
                color = 'var(--text-secondary)';
            }

            content.innerHTML = `
                <h3 style="color: ${color}; margin-bottom: 1rem;">Decision Made</h3>
                <p style="color: var(--text-secondary);">${message}</p>
            `;

            overlay.appendChild(content);
            document.body.appendChild(overlay);

            // Remove overlay after 2.5 seconds
            setTimeout(() => {
                overlay.remove();
            }, 2500);
        }

        function showGameSummary() {
            const card = document.getElementById('scenarioCard');
            
            let summaryTitle = '';
            let summaryMessage = '';
            let finalAdvice = '';

            // Determine player's leadership archetype
            if (gameState.pride > 70) {
                summaryTitle = 'The Fallen King';
                summaryMessage = 'Like Nebuchadnezzar before his humbling, your pride has grown beyond wisdom. Power has corrupted your perspective.';
                finalAdvice = 'Consider what truly matters: Will you learn humility before it\'s too late?';
            } else if (gameState.danielRating > 80 && gameState.ethicalScore > 75) {
                summaryTitle = 'The Faithful Steward';
                summaryMessage = 'Like Daniel, you\'ve maintained integrity while navigating complex power structures. Your choices reflect both wisdom and courage.';
                finalAdvice = 'Continue speaking truth to power and lifting others as you climb.';
            } else if (gameState.reputation > 70) {
                summaryTitle = 'The People\'s Champion';
                summaryMessage = 'You\'ve earned the trust of those around you through consistent care for their wellbeing.';
                finalAdvice = 'True leadership serves others. Keep building bridges, not monuments to yourself.';
            } else {
                summaryTitle = 'The Conflicted Leader';
                summaryMessage = 'You\'ve struggled to balance competing demands, sometimes choosing expedience over principle.';
                finalAdvice = 'Reflect on what kind of legacy you want to leave. It\'s never too late to change course.';
            }

            card.innerHTML = `
                <h2 class="scenario-title">Your Corporate Legacy: ${summaryTitle}</h2>
                <p class="scenario-context">${summaryMessage}</p>
                
                <div class="biblical-parallel">
                    <p class="biblical-text">"Whoever wants to become great among you must be your servant, and whoever wants to be first must be slave of all."</p>
                    <p class="biblical-reference">— Mark 10:43-44</p>
                </div>
                
                <p class="scenario-context">${finalAdvice}</p>

                <div class="decision-options">
                    <button class="decision-button" onclick="showReflectionPrompts()">
                        <div class="decision-title">Reflect on Your Journey</div>
                        <div class="decision-description">Consider how these virtual choices might apply to your real leadership challenges.</div>
                    </button>
                    
                    <button class="decision-button" onclick="shareExperience()">
                        <div class="decision-title">Share Your Insights</div>
                        <div class="decision-description">Invite others to explore the intersection of ancient wisdom and modern leadership.</div>
                    </button>
                    
                    <button class="decision-button" onclick="resetGame()">
                        <div class="decision-title">Begin Again</div>
                        <div class="decision-description">Start a new corporate journey with different choices and see how your path changes.</div>
                    </button>
                </div>
            `;
        }

        function showReflectionPrompts() {
            const journalSection = document.querySelector('.journal-section');
            journalSection.innerHTML = `
                <h3 class="journal-prompt">Final Reflection: Applying Ancient Wisdom to Modern Leadership</h3>
                <div style="margin-bottom: 1rem;">
                    <h4 style="color: var(--accent-gold); margin-bottom: 0.5rem;">Consider these questions:</h4>
                    <ul style="color: var(--text-secondary); padding-left: 1.5rem;">
                        <li>Where do you see pride influencing your real-world decisions?</li>
                        <li>How do you balance profit and people in your current role?</li>
                        <li>What would "Daniel-like integrity" look like in your industry?</li>
                        <li>How can you build systems that prevent ethical blind spots?</li>
                        <li>What small step could you take this week to lead more like Daniel?</li>
                    </ul>
                </div>
                <textarea class="journal-textarea" placeholder="Write your personal insights and commitments here..."></textarea>
                <div style="margin-top: 1rem;">
                    <button onclick="exportJournal()" style="background: var(--accent-gold); color: var(--bg-primary); border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;">Export My Reflections</button>
                </div>
            `;
        }

        function shareExperience() {
            const shareText = `I just completed "The Babylon Protocol: Corporate Colossus" - a thought-provoking experience about leadership, pride, and integrity through the lens of ancient wisdom. My corporate legacy: ${gameState.danielRating}% Daniel Rating, ${gameState.ethicalScore}% Ethical Score. What kind of leader would you become?`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'The Babylon Protocol: Corporate Colossus',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback for browsers without native sharing
                navigator.clipboard.writeText(shareText + '\n\n' + window.location.href).then(() => {
                    alert('Experience details copied to clipboard! Share with your network.');
                });
            }
        }

        function resetGame() {
            gameState = {
                profit: 2.5,
                employees: 15000,
                reputation: 72,
                pride: 30,
                decisions: 0,
                ethicalScore: 73,
                livesImpacted: 8200000,
                danielRating: 87
            };
            
            updateGameDisplay();
            loadNextScenario();
        }

        function exportJournal() {
            const journalText = document.querySelector('.journal-textarea').value;
            const exportContent = `
The Babylon Protocol: Corporate Colossus - Personal Reflections
Generated: ${new Date().toLocaleDateString()}

My Leadership Journey:
- Daniel Rating: ${gameState.danielRating}%
- Ethical Score: ${gameState.ethicalScore}%
- Public Trust: ${gameState.reputation}%
- Pride Level: ${gameState.pride}%
- Lives Impacted: ${gameState.livesImpacted.toLocaleString()}

Personal Reflections:
${journalText}

Remember: "Pride goes before destruction, a haughty spirit before a fall." - Proverbs 16:18

---
Generated by The Babylon Protocol: Corporate Colossus
Made by Justin — Depths to the Heights
depthstoheights@gmail.com
            `.trim();

            const blob = new Blob([exportContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'babylon-protocol-reflections.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Accessibility Functions
        function toggleAccessibility() {
            const panel = document.getElementById('accessibilityPanel');
            panel.classList.toggle('open');
        }

        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-friendly');
        }

        function adjustTextSize(multiplier) {
            const currentSize = parseFloat(getComputedStyle(document.body).fontSize);
            document.body.style.fontSize = (currentSize * multiplier) + 'px';
        }

        function toggleHelp() {
            const panel = document.getElementById('helpPanel');
            panel.classList.toggle('open');
        }

        // Analytics (Privacy-respecting)
        function trackEvent(eventName, data = {}) {
            // In a real implementation, this would send to a privacy-respecting analytics service
            const eventData = {
                event: eventName,
                timestamp: new Date().toISOString(),
                ...data
            };
            console.log('Analytics Event:', eventName, eventData);
        }

        // Track key events
        document.addEventListener('DOMContentLoaded', () => trackEvent('app_loaded', { 
            user_agent: navigator.userAgent.substring(0, 50),
            screen_size: `${window.screen.width}x${window.screen.height}`
        }));
        
        // Add event listeners for tracking
        function startGame() {
            trackEvent('game_started');
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('gameInterface').classList.add('active');
            updateGameDisplay();
        }

        function makeScenarioDecision(choice, effects) {
            trackEvent('decision_made', { choice, decision_number: gameState.decisions + 1 });
            
            gameState.decisions++;
            
            // Apply effects
            gameState.profit += effects.profit || 0;
            gameState.pride += effects.pride || 0;
            gameState.reputation += effects.reputation || 0;
            gameState.ethicalScore += effects.ethical || 0;

            // Update lives impacted based on decision scale
            const impactMultiplier = Math.abs(effects.profit || 0) + Math.abs(effects.reputation || 0);
            gameState.livesImpacted += Math.floor(impactMultiplier * 100000);

            // Calculate Daniel rating based on ethical choices
            const ethicalWeight = (effects.ethical || 0) / 5;
            const prideWeight = -(effects.pride || 0) / 10;
            gameState.danielRating += ethicalWeight + prideWeight;

            // Clamp values
            gameState.pride = Math.max(0, Math.min(100, gameState.pride));
            gameState.reputation = Math.max(0, Math.min(100, gameState.reputation));
            gameState.ethicalScore = Math.max(0, Math.min(100, gameState.ethicalScore));
            gameState.danielRating = Math.max(0, Math.min(100, gameState.danielRating));

            updateGameDisplay();

            // Show outcome
            showDecisionOutcome(choice);

            // Load next scenario after delay
            setTimeout(() => {
                if (gameState.decisions >= 10) {
                    trackEvent('game_completed', { 
                        daniel_rating: gameState.danielRating,
                        ethical_score: gameState.ethicalScore,
                        pride_level: gameState.pride 
                    });
                    showGameSummary();
                } else {
                    loadNextScenario();
                }
            }, 3000);
        }

        // Initialize first scenario when game starts
        window.addEventListener('load', () => {
            // Preload next scenario
            setTimeout(() => {
                if (gameState.decisions === 0) {
                    loadNextScenario();
                }
            }, 100);
        });
    </script>

    <!-- PWA Functionality without Service Worker -->
    <script>
        // PWA Installation prompt handling
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            trackEvent('pwa_install_prompt_available');
            
            // Show custom install button if desired
            const installButton = document.createElement('button');
            installButton.textContent = 'Install App';
            installButton.style.cssText = `
                position: fixed;
                bottom: 80px;
                right: 20px;
                background: var(--accent-gold);
                color: var(--bg-primary);
                border: none;
                padding: 0.75rem 1rem;
                border-radius: 20px;
                cursor: pointer;
                font-weight: 600;
                z-index: 100;
                box-shadow: 0 4px 12px rgba(214, 158, 46, 0.3);
            `;
            
            installButton.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const result = await deferredPrompt.userChoice;
                    trackEvent('pwa_install_result', { outcome: result.outcome });
                    deferredPrompt = null;
                    installButton.remove();
                }
            });
            
            document.body.appendChild(installButton);
        });

        window.addEventListener('appinstalled', () => {
            trackEvent('pwa_installed');
            console.log('Babylon Protocol: PWA installed successfully');
        });

        // Offline detection and user notification
        function handleOfflineStatus() {
            if (!navigator.onLine) {
                const offlineNotice = document.createElement('div');
                offlineNotice.id = 'offline-notice';
                offlineNotice.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    background: var(--warning);
                    color: var(--bg-primary);
                    padding: 0.75rem;
                    text-align: center;
                    font-weight: 600;
                    z-index: 1000;
                `;
                offlineNotice.textContent = 'You are currently offline. Some features may be limited.';
                document.body.appendChild(offlineNotice);
                trackEvent('offline_detected');
            } else {
                const notice = document.getElementById('offline-notice');
                if (notice) {
                    notice.remove();
                    trackEvent('online_restored');
                }
            }
        }

        window.addEventListener('online', handleOfflineStatus);
        window.addEventListener('offline', handleOfflineStatus);

        // Initialize offline status check
        document.addEventListener('DOMContentLoaded', handleOfflineStatus);

        console.log('Babylon Protocol: PWA functionality initialized without Service Worker');
        trackEvent('pwa_initialized', { 
            online: navigator.onLine,
            standalone: window.matchMedia('(display-mode: standalone)').matches 
        });
 
</script>
    <!-- Donation note -->
<div role="note" style="margin:16px 0; font-size:0.95rem; opacity:0.95;">
  <strong>Free to use.</strong>
  If this encouraged you, feel free to
  <a href="https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U" target="_blank" rel="noopener">buy me a coffee</a>.
  <span>— Made by Justin, Depths to the Heights</span>
</div>

<!-- Branding footer -->
<footer style="text-align:center;opacity:.9;margin:24px 0">
  <strong>Made by Justin — Depths to the Heights</strong> ·
  <a href="mailto:depthstoheights@gmail.com">depthstoheights@gmail.com</a>
</footer>

<!-- Service worker registration -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./service-worker.js');
  }
</script>

</body>
</html>
